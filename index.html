<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å°æ£®æ—å…’ç§‘è¨ºæ‰€ - é—œæ±ç†±æµ·èŠ±ç«5æ—¥</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        morandi: {
                            pale: '#E3EBE3', /* èª¿æ•´å¾Œçš„èƒŒæ™¯è‰²ï¼šç¨å¾®åŠ æ·±çš„æ·¡è«è˜­è¿ªç¶  */
                            light: '#E0E5DF', /* æ·ºè«è˜­è¿ªç¶  */
                            DEFAULT: '#8FBC8F', /* è«è˜­è¿ªç¶ ä¸»è‰² */
                            dark: '#6F8F72', /* æ·±è«è˜­è¿ªç¶  (ç”¨æ–¼æ–‡å­—) */
                            header: '#AAB8AB', /* ç”¨æˆ¶æŒ‡å®šçš„æ–° Header åº•è‰² */
                        },
                        cream: {
                            light: '#FFFDF5', 
                            DEFAULT: '#FDF6E3', /* æº«æš–å¥¶æ²¹è‰² */
                            dark: '#E6DCCF', 
                        },
                        text: {
                            main: '#4A5568',
                            light: '#718096'
                        }
                    },
                    fontFamily: {
                        sans: ['Noto Sans TC', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        /* Force full viewport height specifically for mobile browsers */
        body {
            height: 100vh; /* Fallback */
            height: 100dvh; /* Dynamic viewport height for mobile address bars */
            background-color: #E3EBE3; /* Updated Background Color */
            color: #4A5568;
            overflow: hidden; /* Prevent body scroll, handle in main */
        }

        /* Fireworks Canvas */
        #fireworks-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0; /* Behind content */
            pointer-events: none; /* Let clicks pass through */
        }

        .tab-active {
            background-color: #AAB8AB; /* Updated: Match header color */
            color: white;
            font-weight: bold;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .tab-inactive {
            background-color: white;
            color: #AAB8AB; /* Updated: Match header color */
            border: 1px solid #E0E5DF;
        }
        /* Cards need to be opaque to be readable over fireworks */
        .card {
            background-color: rgba(255, 255, 255, 0.95); /* Slightly transparent white */
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
            border-left: 5px solid #8FBC8F;
            backdrop-filter: blur(2px);
        }
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        /* Special style for meal cards */
        .card-meal {
            background-color: rgba(255, 254, 250, 0.95);
            border-left-color: #F6E05E; /* Yellow for meals */
        }
        /* Alert/Reminder Card */
        .card-alert {
            background-color: rgba(255, 245, 245, 0.98);
            border-left-color: #F56565; /* Red for alert */
        }
        
        .timeline-line {
            position: absolute;
            left: 20px;
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: rgba(143, 188, 143, 0.4); /* Adjusted line color visibility */
            z-index: 0;
        }
        .hide {
            display: none;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Custom scrollbar for horizontal tabs on mobile */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        /* Recommendation Link Button */
        .rec-link {
            display: inline-flex;
            align-items: center;
            margin-top: 4px;
            font-size: 0.75rem;
            color: #4A5568;
            background-color: #EDF2F7;
            padding: 4px 8px;
            border-radius: 4px;
            transition: all 0.2s;
            text-decoration: none;
            border: 1px solid #CBD5E0;
        }
        .rec-link:hover {
            background-color: #CBD5E0;
            color: #2D3748;
        }
        .rec-item {
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px dashed #E2E8F0;
        }
        .rec-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        /* Shin-chan Running Animation */
        .shin-chan-container {
            position: fixed;
            bottom: 10px; /* Distance from bottom */
            left: -150px; /* Start off-screen */
            z-index: 60; /* Above everything */
            pointer-events: none; /* Click through */
            animation: runAcross 15s linear infinite;
            display: flex;
            align-items: flex-end;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
        }
        
        .shin-chan-img {
            height: 80px; /* Adjust size as needed */
            width: auto;
        }

        @keyframes runAcross {
            0% {
                transform: translateX(-150px);
            }
            100% {
                transform: translateX(100vw); /* Run to the end of viewport width */
            }
        }
    </style>
</head>
<!-- Use flex-col and h-screen to create a fixed header + scrollable content layout -->
<body class="flex flex-col font-sans relative">

    <!-- Fireworks Canvas Background -->
    <canvas id="fireworks-canvas"></canvas>

    <!-- Shin-chan Animation Layer -->
    <div class="shin-chan-container">
        <!-- å°æ–°èˆ‡å°ç™½è·‘æ­¥çš„ GIF -->
        <img src="https://media.tenor.com/tHj18tGz9CQAAAAi/crayon-shin-chan-run.gif" alt="Shin-chan Running" class="shin-chan-img" onerror="this.style.display='none'">
    </div>

    <!-- Fixed Top Section (Header + Tabs) -->
    <!-- Updated: bg-morandi-header for the new color AAB8AB -->
    <div class="flex-none z-50 shadow-md relative bg-morandi-header text-white">
        <!-- Header -->
        <header class="p-5 relative overflow-hidden border-b border-white/10">
            <!-- Decorative Background Icons -->
            <i class="fa-solid fa-cloud text-white absolute top-[-10px] left-[-20px] text-8xl opacity-10 transform rotate-12"></i>
            <i class="fa-solid fa-cloud text-white absolute bottom-[-20px] right-[-10px] text-9xl opacity-10"></i>
            <i class="fa-solid fa-sun text-yellow-300 absolute top-[-15px] right-[10%] text-6xl animate-spin opacity-80" style="animation-duration: 12s;"></i>
            
            <!-- Floating Cute Elements -->
            <i class="fa-solid fa-plane-up text-cream-light absolute top-6 right-6 text-xl animate-bounce opacity-80" style="animation-duration: 3s;"></i>
            <i class="fa-solid fa-leaf text-morandi-light absolute bottom-4 left-12 text-2xl opacity-40 transform -rotate-45"></i>
            <i class="fa-solid fa-camera text-cream-light absolute top-1/2 left-4 text-3xl opacity-20 transform -translate-y-1/2 rotate-12"></i>
            
            <div class="container mx-auto max-w-2xl text-center relative z-10">
                <div class="flex justify-center items-center gap-3 mb-2">
                     <!-- Left Tree Icon -->
                     <div class="bg-white/90 p-2.5 rounded-full shadow-sm backdrop-blur-sm">
                        <i class="fa-solid fa-tree text-morandi-dark text-xl"></i>
                     </div>
                     
                     <!-- Title (White Text) -->
                     <h1 class="text-xl md:text-2xl font-bold tracking-wide text-white drop-shadow-md">å°æ£®æ—å…’ç§‘è¨ºæ‰€</h1>
                     
                     <!-- Right Tree Icon -->
                     <div class="bg-white/90 p-2.5 rounded-full shadow-sm backdrop-blur-sm">
                        <i class="fa-solid fa-tree text-morandi-dark text-xl"></i>
                     </div>
                </div>
                
                <div class="inline-block relative">
                    <span class="text-xs md:text-sm text-morandi-dark font-bold bg-cream-light/95 py-1.5 px-5 rounded-full shadow-sm border border-white/20">
                        <i class="fa-solid fa-location-dot text-red-400 mr-1"></i>
                        é—œæ±ç†±æµ·ç®±æ ¹ãƒ»èŠ±ç«å¤§æœƒ 5æ—¥éŠ
                        <i class="fa-solid fa-fire text-orange-400 ml-1"></i>
                    </span>
                </div>
            </div>
        </header>

        <!-- Date Navigation -->
        <div class="bg-white/95 border-b border-morandi-light backdrop-blur-sm">
            <div class="container mx-auto max-w-2xl py-3 px-2">
                <div class="flex overflow-x-auto space-x-3 pb-1 scrollbar-hide" id="date-tabs">
                    <!-- Tabs will be injected by JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- Scrollable Main Content -->
    <!-- z-10 to sit above canvas -->
    <main id="main-content" class="flex-grow overflow-y-auto relative w-full z-10">
        <div class="container mx-auto max-w-2xl p-4 min-h-full pb-20">
            <div id="itinerary-container">
                <!-- Itinerary content will be injected by JS -->
            </div>
            
             <!-- Footer inside scrollable area -->
            <footer class="text-text-main py-6 mt-8 text-center text-sm opacity-70">
                <p class="font-medium"><i class="fa-solid fa-suitcase-rolling mr-2"></i>å±±å¯Œåœ‹éš›æ—…è¡Œç¤¾</p>
                <p class="text-xs mt-1 text-text-light">è¡Œç¨‹å¯èƒ½å› å¯¦éš›äº¤é€šèˆ‡æ°£å€™ç‹€æ³èª¿æ•´</p>
            </footer>
        </div>
    </main>

    <script>
        /** * FIREWORKS ANIMATION LOGIC 
         */
        const canvas = document.getElementById('fireworks-canvas');
        const ctx = canvas.getContext('2d');
        let canvasWidth = window.innerWidth;
        let canvasHeight = window.innerHeight;
        let fireworks = [];
        let particles = [];

        // Morandi & Pastel Palette for Fireworks
        const colors = [
            '#FFB7B2', // Soft Red
            '#FFDAC1', // Soft Orange
            '#E2F0CB', // Soft Green
            '#B5EAD7', // Mint
            '#C7CEEA', // Soft Purple
            '#F6EAC2', // Cream Yellow
            '#8FBC8F', // Morandi Green
            '#FFD700'  // Gold (Classic)
        ];

        function resizeCanvas() {
            canvasWidth = window.innerWidth;
            canvasHeight = window.innerHeight;
            canvas.width = canvasWidth;
            canvas.height = canvasHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function random(min, max) {
            return Math.random() * (max - min) + min;
        }

        class Firework {
            constructor(x, y, targetX, targetY) {
                this.x = x;
                this.y = y;
                this.targetX = targetX;
                this.targetY = targetY;
                this.distanceToTarget = Math.sqrt(Math.pow(targetX - x, 2) + Math.pow(targetY - y, 2));
                this.distanceTraveled = 0;
                this.coordinates = [];
                this.coordinateCount = 3;
                while (this.coordinateCount--) {
                    this.coordinates.push([this.x, this.y]);
                }
                this.angle = Math.atan2(targetY - y, targetX - x);
                this.speed = 2;
                this.acceleration = 1.05;
                this.brightness = random(50, 70);
                // Color for trail (faint gold)
                this.color = '#F6EAC2'; 
            }

            update(index) {
                this.coordinates.pop();
                this.coordinates.unshift([this.x, this.y]);

                this.speed *= this.acceleration;
                const vx = Math.cos(this.angle) * this.speed;
                const vy = Math.sin(this.angle) * this.speed;
                this.distanceTraveled = Math.sqrt(Math.pow(this.x + vx - this.coordinates[this.coordinates.length - 1][0], 2) + Math.pow(this.y + vy - this.coordinates[this.coordinates.length - 1][1], 2)); 

                // Check if reached target
                if (Math.abs(this.x - this.targetX) < 20 && Math.abs(this.y - this.targetY) < 20) { 
                     createParticles(this.targetX, this.targetY);
                     fireworks.splice(index, 1);
                } else {
                    this.x += vx;
                    this.y += vy;
                }
                
                // Safety cleanup
                if(this.y < -50 || this.x < -50 || this.x > canvasWidth + 50) {
                    fireworks.splice(index, 1);
                }
            }

            draw() {
                ctx.beginPath();
                ctx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]);
                ctx.lineTo(this.x, this.y);
                ctx.strokeStyle = this.color;
                ctx.lineWidth = 1.5;
                ctx.stroke();
            }
        }

        class Particle {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.coordinates = [];
                this.coordinateCount = 5;
                while (this.coordinateCount--) {
                    this.coordinates.push([this.x, this.y]);
                }
                this.angle = random(0, Math.PI * 2);
                this.speed = random(1, 8); // Varied explosion speed
                this.friction = 0.95;
                this.gravity = 1;
                this.hue = random(0, 360); 
                this.color = colors[Math.floor(random(0, colors.length))];
                this.alpha = 1;
                this.decay = random(0.015, 0.03);
            }

            update(index) {
                this.coordinates.pop();
                this.coordinates.unshift([this.x, this.y]);
                this.speed *= this.friction;
                this.x += Math.cos(this.angle) * this.speed;
                this.y += Math.sin(this.angle) * this.speed + this.gravity;
                this.alpha -= this.decay;

                if (this.alpha <= this.decay) {
                    particles.splice(index, 1);
                }
            }

            draw() {
                ctx.beginPath();
                ctx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]);
                ctx.lineTo(this.x, this.y);
                ctx.strokeStyle = this.color; 
                ctx.globalAlpha = this.alpha;
                ctx.lineWidth = 2; 
                ctx.stroke();
                ctx.globalAlpha = 1;
            }
        }

        function createParticles(x, y) {
            let particleCount = 40; 
            while (particleCount--) {
                particles.push(new Particle(x, y));
            }
        }

        function loop() {
            requestAnimationFrame(loop);
            
            // Create a trail effect matching the new background
            // Background color is #E3EBE3 (227, 235, 227)
            ctx.globalCompositeOperation = 'destination-out';
            ctx.fillStyle = 'rgba(227, 235, 227, 0.2)'; 
            ctx.fillRect(0, 0, canvasWidth, canvasHeight);
            
            ctx.globalCompositeOperation = 'lighter';

            // Randomly launch fireworks
            if (random(0, 100) < 2) { 
                let startX = random(canvasWidth * 0.1, canvasWidth * 0.9);
                let targetY = random(canvasHeight * 0.1, canvasHeight * 0.5); 
                fireworks.push(new Firework(startX, canvasHeight, startX, targetY));
            }

            let i = fireworks.length;
            while (i--) {
                fireworks[i].draw();
                fireworks[i].update(i);
            }

            let j = particles.length;
            while (j--) {
                particles[j].draw();
                particles[j].update(j);
            }
        }
        
        // Start animation
        loop();


        // --- Existing App Logic Below ---

        // Data Structure extracted from PDF - Restructured meals to be chronological
        const itineraryData = [
            {
                id: 'day1',
                date: '5/23',
                day: 'é€±å…­',
                title: 'å•Ÿç¨‹ãƒ»æ©«æ¿±é¢¨æƒ…',
                items: [
                    {
                        type: 'flight',
                        time: '08:30',
                        title: 'æ¡ƒåœ’åœ‹éš›æ©Ÿå ´ âœˆ æ±äº¬æˆç”°æ©Ÿå ´',
                        desc: 'æ­ä¹˜æ˜Ÿå®‡èˆªç©º <span class="font-bold text-blue-500">JX800</span> (08:30 èµ·é£› / 12:55 æŠµé”) å‰å¾€æ±äº¬ã€‚',
                        icon: 'fa-plane-departure'
                    },
                    {
                        type: 'meal',
                        time: 'åˆé¤',
                        title: 'æ©Ÿä¸Šç°¡é¤',
                        desc: 'æ©Ÿä¸Šäº«ç”¨ç°¡é¤ + èŠ±å£½å¸ + é£²æ–™ (Â¥1500)',
                        icon: 'fa-utensils'
                    },
                    {
                        type: 'transport',
                        time: 'ä¸‹åˆ',
                        title: 'å‰å¾€æ©«æ¿±',
                        desc: 'è»Šç¨‹ç´„1.5å°æ™‚ï¼Œé€”ç¶“è‘—åçš„ã€Œæ©«æ¿±è·¨æµ·å¤§æ©‹ã€æ¬£è³æ¸¯ç£ç¾æ™¯ã€‚',
                        icon: 'fa-bus'
                    },
                    {
                        type: 'activity',
                        time: 'å‚æ™š',
                        title: 'é£¯åº— Check-in & æ©«æ¿±è‡ªç”±é€›è¡—',
                        desc: 'å…¥ä½é£¯åº—å¾Œè‡ªç”±æ´»å‹•ã€‚æ¨è–¦å‰å¾€æ©«æ¿±æ¸¯æœªä¾†21ã€ç´…ç£šå€‰åº«æˆ–ä¸­è¯è¡—æ¢ç´¢ç¾é£Ÿèˆ‡å¤œæ™¯ã€‚',
                        icon: 'fa-city'
                    },
                    {
                        type: 'meal',
                        time: 'æ™šé¤',
                        title: 'æ¨è–¦ï¼šæ©«æ¿±ç†±é–€é¤å»³ (è‡ªç†)',
                        desc: `
                            <div class="rec-item">
                                <div class="font-bold text-gray-700">ğŸœ è¬çæ¨“ (Manchinro)</div>
                                <div class="text-xs text-gray-500 mb-1">ä¸­è¯è¡—ç™¾å¹´ç²µèœè€åº—ï¼Œè£æ½¢è¯éº—ï¼ŒGoogle è©•è«– 4000+ã€‚</div>
                                <a href="https://www.google.com/maps/search/?api=1&query=Manchinro+Yokohama" target="_blank" class="rec-link">
                                    <i class="fa-solid fa-map-location-dot mr-1"></i> å°èˆªå»
                                </a>
                            </div>
                            <div class="rec-item">
                                <div class="font-bold text-gray-700">ğŸ¥ Bills æ©«æ¿±ç´…ç£šå€‰åº«</div>
                                <div class="text-xs text-gray-500 mb-1">ä¾†è‡ªæ¾³æ´²çš„ã€Œä¸–ç•Œç¬¬ä¸€æ—©é¤ã€ï¼Œæ™šé¤æ°£æ°›ä½³ï¼Œå¯è³å¤œæ™¯ã€‚Google è©•è«– 2000+ã€‚</div>
                                <a href="https://www.google.com/maps/search/?api=1&query=Bills+Yokohama+Red+Brick+Warehouse" target="_blank" class="rec-link">
                                    <i class="fa-solid fa-map-location-dot mr-1"></i> å°èˆªå»
                                </a>
                            </div>
                        `,
                        icon: 'fa-burger'
                    },
                    {
                        type: 'hotel',
                        title: 'ä½å®¿',
                        desc: 'æ©«æ¿±æ±æ€¥REIé£¯åº— / MYSTAYS æ©«æ¿±é—œå…§é…’åº— / APA HOTEL YOKOHAMA-KANNAI æˆ–åŒç´š',
                        icon: 'fa-bed'
                    }
                ]
            },
            {
                id: 'day2',
                date: '5/24',
                day: 'é€±æ—¥',
                title: 'æ±Ÿä¹‹å³¶ãƒ»ç†±æµ·èŠ±ç«',
                items: [
                    {
                        type: 'meal',
                        time: 'æ—©é¤',
                        title: 'é£¯åº—å…§äº«ç”¨',
                        desc: 'äº«ç”¨è±ç››çš„é£¯åº—æ—©é¤ï¼Œé–‹å•Ÿç¾å¥½çš„ä¸€å¤©ã€‚',
                        icon: 'fa-mug-hot'
                    },
                    {
                        type: 'activity',
                        time: 'ä¸Šåˆ',
                        title: 'æ±Ÿä¹‹å³¶',
                        desc: 'æ¼«æ­¥ã€Œç¶ è‰²æ±Ÿä¹‹å³¶ã€ï¼Œåƒæ‹œåƒå¹´æ­·å²çš„ã€Œæ±Ÿå³¶ç¥ç¤¾ã€ï¼Œæ„Ÿå—æ¹˜å—æµ·å²¸çš„å®—æ•™èˆ‡äººæ–‡æ°£æ¯ã€‚',
                        icon: 'fa-torii-gate'
                    },
                    {
                        type: 'meal',
                        time: 'åˆé¤',
                        title: 'æ—¥å¼é¢¨å‘³é¤',
                        desc: 'æ—¥å¼å®šé£Ÿé¢¨å‘³é¤æˆ–æ—¥å¼å¾¡è†³æ–™ç† (é¤æ¨™Â¥3500)',
                        icon: 'fa-utensils'
                    },
                    {
                        type: 'transport',
                        time: 'ä¸‹åˆ',
                        title: 'å‰å¾€å°ç”°åŸ & ç†±æµ·',
                        desc: 'å…ˆè‡³å°ç”°åŸé£¯åº—å¯„æ”¾è¡Œæï¼Œéš¨å¾Œå‰å¾€ç†±æµ·æº«æ³‰å€ã€‚',
                        icon: 'fa-suitcase'
                    },
                    {
                        type: 'activity',
                        time: 'ä¸‹åˆ',
                        title: 'ç†±æµ·çºœè»Š & æº«æ³‰è¡—',
                        desc: 'æ­ä¹˜ç»ç’ƒçºœè»Šç™»ä¸Šå…«å¹¡å±±ï¼Œçœºæœ›ç†±æµ·å¸‚å€èˆ‡ç›¸æ¨¡ç£ç¾æ™¯ã€‚éš¨å¾Œè‡ªç”±é€›ç†±æµ·æº«æ³‰è¡—ã€‚',
                        icon: 'fa-tram'
                    },
                    {
                        type: 'meal',
                        time: 'æ™šé¤',
                        title: 'æ¨è–¦ï¼šç†±æµ·æµ·é®® (è‡ªç†)',
                        desc: `
                            <div class="rec-item">
                                <div class="font-bold text-gray-700">ğŸŸ åœçˆè£èŒ¶å±‹ (Irori Chaya)</div>
                                <div class="text-xs text-gray-500 mb-1">ç†±æµ·äººæ°£æµ·é®®å±…é…’å±‹ï¼Œæ‹›ç‰Œæ˜¯é®®é­šèŒ¶æ³¡é£¯ã€‚Google è©•è«– 2000+ã€‚</div>
                                <a href="https://www.google.com/maps/search/?api=1&query=Irori+Chaya+Atami" target="_blank" class="rec-link">
                                    <i class="fa-solid fa-map-location-dot mr-1"></i> å°èˆªå»
                                </a>
                            </div>
                            <div class="rec-item">
                                <div class="font-bold text-gray-700">ğŸ£ Maguroya (ã¾ãã‚ã‚„)</div>
                                <div class="text-xs text-gray-500 mb-1">ç†±æµ·ç«™å‰é«˜CPå€¼æµ·é®®ä¸¼é£¯ï¼Œé®ªé­šæ–™ç†å°ˆé–€ã€‚Google è©•è«– 1000+ã€‚</div>
                                <a href="https://www.google.com/maps/search/?api=1&query=Maguroya+Atami" target="_blank" class="rec-link">
                                    <i class="fa-solid fa-map-location-dot mr-1"></i> å°èˆªå»
                                </a>
                            </div>
                        `,
                        icon: 'fa-burger'
                    },
                    {
                        type: 'highlight',
                        time: '20:30',
                        title: 'ç†±æµ·æµ·ä¸ŠèŠ±ç«å¤§æœƒ',
                        desc: 'ç†±æµ·ç£ç‰¹æ®Šçš„ã€Œå¤©ç„¶åŠ‡å ´ã€åœ°å½¢ï¼Œæ¬£è³é­„åŠ›åè¶³çš„ç…™ç«å€’æ˜ åœ¨æµ·é¢ä¸Šã€‚',
                        icon: 'fa-fireworks', 
                        specialClass: 'border-l-pink-400' 
                    },
                    {
                        type: 'transport',
                        time: 'æ™šé–“',
                        title: 'è¿”å›å°ç”°åŸ',
                        desc: 'æ­ä¹˜ JR (ç†±æµ·-å°ç”°åŸ) è¿”å›é£¯åº— Check-inã€‚',
                        icon: 'fa-train'
                    },
                    {
                        type: 'hotel',
                        title: 'ä½å®¿',
                        desc: 'å¤©æˆåœ’ å°ç”°åŸé§…åˆ¥é¤¨ / å°ç”°åŸç«™æ±å£æ±æ©«INN æˆ–åŒç´š',
                        icon: 'fa-bed'
                    }
                ]
            },
            {
                id: 'day3',
                date: '5/25',
                day: 'é€±ä¸€',
                title: 'ç®±æ ¹çµ•æ™¯ãƒ»æµ·ç›œèˆ¹',
                items: [
                     {
                        type: 'meal',
                        time: 'æ—©é¤',
                        title: 'é£¯åº—å…§äº«ç”¨',
                        desc: 'äº«ç”¨é£¯åº—æ—©é¤ã€‚',
                        icon: 'fa-mug-hot'
                    },
                    {
                        type: 'activity',
                        time: 'ä¸Šåˆ',
                        title: 'ç®±æ ¹ç™»å±±éµé“ & æ–œé¢é›»è»Š',
                        desc: 'é«”é©—è‘—åçš„ç®±æ ¹ç™»å±±éµé“ (ç®±æ ¹æ¹¯æœ¬-å¼·ç¾…) åŠæ–œé¢é›»è»Š (å¼·ç¾…-æ—©é›²å±±)ã€‚',
                        icon: 'fa-train-subway'
                    },
                    {
                        type: 'activity',
                        time: 'ä¸Šåˆ',
                        title: 'ç®±æ ¹ç©ºä¸­çºœè»Š & å¤§æ¶Œè°·',
                        desc: 'ä¿¯ç°è˜†ä¹‹æ¹–èˆ‡å¯Œå£«å±±å…¨æ™¯ï¼Œåƒè§€ç«å±±éºè·¡ã€Œå¤§æ¶Œè°·ã€(å¤§åœ°ç„)ã€‚',
                        icon: 'fa-mountain'
                    },
                    {
                        type: 'meal',
                        time: 'åˆé¤',
                        title: 'æ—¥å¼å¾¡è†³',
                        desc: 'æ—¥å¼å¾¡è†³æ–™ç† (é¤æ¨™Â¥3500)',
                        icon: 'fa-utensils'
                    },
                    {
                        type: 'activity',
                        time: 'ä¸‹åˆ',
                        title: 'è˜†ä¹‹æ¹–æµ·ç›œèˆ¹',
                        desc: 'æ­ä¹˜è±ªè¯æµ·ç›œèˆ¹éŠè¦½è˜†ä¹‹æ¹–ï¼Œæ¬£è³æ¹–å…‰å±±è‰²èˆ‡å¯Œå£«å±±å€’å½±ã€‚',
                        icon: 'fa-ship'
                    },
                    {
                        type: 'activity',
                        time: 'ä¸‹åˆ',
                        title: 'ç®±æ ¹ç¥ç¤¾',
                        desc: 'åƒæ‹œé–‹é‹ä¹‹ç¥ï¼Œå¿…æ‹æ™¯é»ï¼šçŸ—ç«‹åœ¨æ¹–æ°´ä¸Šçš„ã€Œå¹³å’Œçš„é³¥å±…ã€ã€‚',
                        icon: 'fa-camera'
                    },
                    {
                        type: 'transport',
                        time: 'å‚æ™š',
                        title: 'å‰å¾€æ±äº¬',
                        desc: 'çµæŸç®±æ ¹è¡Œç¨‹ï¼Œå°ˆè»Šå‰å¾€æ±äº¬å¸‚å€ã€‚',
                        icon: 'fa-bus'
                    },
                    {
                        type: 'meal',
                        time: 'æ™šé¤',
                        title: 'æ—¥å¼å’Œç‰›ç‡’è‚‰',
                        desc: 'æ—¥å¼å’Œç‰›ç‡’è‚‰åƒåˆ°é£½ (åŠ è´ˆè»Ÿæ€§é£²æ–™å–åˆ°é£½) (é¤æ¨™Â¥4000)',
                        icon: 'fa-fire-burner'
                    },
                    {
                        type: 'hotel',
                        title: 'ä½å®¿',
                        desc: 'æ± è¢‹å¤ªé™½åŸç‹å­ / ä¸Šé‡CANDEO / æ–°å®¿è¯ç››é “ / å“å·ç‹å­ æˆ–åŒç´š',
                        icon: 'fa-bed'
                    }
                ]
            },
            {
                id: 'day4',
                date: '5/26',
                day: 'é€±äºŒ',
                title: 'æ±äº¬ãƒ»è‡ªç”±æ¢ç´¢',
                items: [
                    {
                        type: 'meal',
                        time: 'æ—©é¤',
                        title: 'é£¯åº—å…§äº«ç”¨',
                        desc: 'äº«ç”¨é£¯åº—æ—©é¤ã€‚',
                        icon: 'fa-mug-hot'
                    },
                    {
                        type: 'activity',
                        time: 'å…¨æ—¥',
                        title: 'æ±äº¬è‡ªç”±æ´»å‹•',
                        desc: 'å…¨æ—¥è‡ªç”±æ´»å‹•ã€‚æ‚¨å¯ä»¥è‡ªè¡Œå‰å¾€æ¾€è°·ã€æ–°å®¿ã€éŠ€åº§é€›è¡—ï¼Œæˆ–é€ è¨ªæ±äº¬è¿ªå£«å°¼æ¨‚åœ’ã€æ·ºè‰å¯ºç­‰æ™¯é»ã€‚',
                        icon: 'fa-person-walking-luggage'
                    },
                    {
                        type: 'meal',
                        time: 'åˆé¤',
                        title: 'æ¨è–¦ï¼šæ±äº¬äººæ°£ç¾é£Ÿ (è‡ªç†)',
                        desc: `
                            <div class="rec-item">
                                <div class="font-bold text-gray-700">ğŸœ ç„¡æ•µå®¶æ‹‰éºµ (Mutekiya)</div>
                                <div class="text-xs text-gray-500 mb-1">æ± è¢‹æ’éšŠå‚³å¥‡ï¼Œæ¿ƒåšè±šéª¨æ‹‰éºµï¼ŒGoogle è©•è«– 12000+ã€‚</div>
                                <a href="https://www.google.com/maps/search/?api=1&query=Mutekiya+Ramen+Ikebukuro" target="_blank" class="rec-link">
                                    <i class="fa-solid fa-map-location-dot mr-1"></i> æ± è¢‹å°èˆª
                                </a>
                            </div>
                            <div class="rec-item">
                                <div class="font-bold text-gray-700">ğŸ¥© æ·ºè‰ç‚¸ç‰›æ’ (Asakusa Gyukatsu)</div>
                                <div class="text-xs text-gray-500 mb-1">æ·ºè‰é›·é–€å°é¢ï¼Œé…¥è„†è»Ÿå«©çš„ç‚¸ç‰›æ’ï¼ŒGoogle è©•è«– 6000+ã€‚</div>
                                <a href="https://www.google.com/maps/search/?api=1&query=Asakusa+Gyukatsu" target="_blank" class="rec-link">
                                    <i class="fa-solid fa-map-location-dot mr-1"></i> æ·ºè‰å°èˆª
                                </a>
                            </div>
                        `,
                        icon: 'fa-burger'
                    },
                    {
                        type: 'meal',
                        time: 'æ™šé¤',
                        title: 'æ¨è–¦ï¼šæ–°å®¿/ä¸Šé‡ç¾é£Ÿ (è‡ªç†)',
                        desc: `
                            <div class="rec-item">
                                <div class="font-bold text-gray-700">ğŸœ é¢¨é›²å…’ (Fuunji)</div>
                                <div class="text-xs text-gray-500 mb-1">æ–°å®¿æœ€å¼·æ²¾éºµä¹‹ä¸€ï¼Œæ¿ƒéƒé›ç™½æ¹¯é­šä»‹ï¼ŒGoogle è©•è«– 4000+ã€‚</div>
                                <a href="https://www.google.com/maps/search/?api=1&query=Fuunji+Ramen+Shinjuku" target="_blank" class="rec-link">
                                    <i class="fa-solid fa-map-location-dot mr-1"></i> æ–°å®¿å°èˆª
                                </a>
                            </div>
                            <div class="rec-item">
                                <div class="font-bold text-gray-700">ğŸŸ ä¼Šè±†æ¦® æœ¬åº— (Izuei)</div>
                                <div class="text-xs text-gray-500 mb-1">ä¸Šé‡300å¹´æ­·å²é°»é­šé£¯è€èˆ–ï¼Œå‚³çµ±ç¾å‘³ï¼ŒGoogle è©•è«– 2000+ã€‚</div>
                                <a href="https://www.google.com/maps/search/?api=1&query=Izuei+Main+Branch+Ueno" target="_blank" class="rec-link">
                                    <i class="fa-solid fa-map-location-dot mr-1"></i> ä¸Šé‡å°èˆª
                                </a>
                            </div>
                        `,
                        icon: 'fa-burger'
                    },
                    {
                        type: 'hotel',
                        title: 'ä½å®¿',
                        desc: 'æ± è¢‹å¤ªé™½åŸç‹å­ / ä¸Šé‡CANDEO / æ–°å®¿è¯ç››é “ / å“å·ç‹å­ æˆ–åŒç´š (çºŒä½)',
                        icon: 'fa-bed'
                    }
                ]
            },
            {
                id: 'day5',
                date: '5/27',
                day: 'é€±ä¸‰',
                title: 'æ»¿è¼‰è€Œæ­¸',
                items: [
                    {
                        type: 'meal',
                        time: 'ä¸Šåˆ',
                        title: 'æ—©é¤æ™‚å…‰',
                        desc: 'äº«å—é£¯åº—æ—©é¤ï¼Œæ•´ç†è¡Œå›Šã€‚',
                        icon: 'fa-mug-hot'
                    },
                    {
                        type: 'meal',
                        time: 'åˆé¤',
                        title: 'æ©Ÿä¸Šç°¡é¤',
                        desc: 'æ–¼å›ç¨‹ç­æ©Ÿä¸Šäº«ç”¨ã€‚',
                        icon: 'fa-utensils'
                    },
                    {
                        type: 'alert',
                        time: 'é‡è¦æé†’',
                        title: 'æ³¨æ„å›ç¨‹èˆªç­æ™‚é–“',
                        desc: 'å›ç¨‹ç­æ©Ÿç‚º <span class="font-bold text-red-500">14:10</span> èµ·é£›ã€‚<br>å»ºè­°æ–¼ <span class="font-bold">11:40</span> å‰æŠµé”æ©Ÿå ´è¾¦ç†ç™»æ©Ÿæ‰‹çºŒã€‚',
                        icon: 'fa-bell',
                        specialClass: 'card-alert'
                    },
                    {
                        type: 'flight',
                        time: '14:10',
                        title: 'æ±äº¬æˆç”°æ©Ÿå ´ âœˆ æ¡ƒåœ’åœ‹éš›æ©Ÿå ´',
                        desc: 'å‰å¾€æ©Ÿå ´æ­æ©Ÿè¿”å°ã€‚<br>æ˜Ÿå®‡èˆªç©º <span class="font-bold text-blue-500">JX801</span> (14:10 èµ·é£› / 16:50 æŠµé”)ã€‚',
                        icon: 'fa-plane-arrival'
                    },
                    {
                        type: 'end',
                        title: 'æº«æš–çš„å®¶',
                        desc: 'å¹³å®‰æŠµé”ï¼ŒæœŸå¾…ä¸‹æ¬¡ç›¸èšï¼',
                        icon: 'fa-house'
                    }
                ]
            }
        ];

        // Init function
        function initApp() {
            renderTabs();
            // Default to first day
            switchTab(0);
        }

        function renderTabs() {
            const tabsContainer = document.getElementById('date-tabs');
            let html = '';
            itineraryData.forEach((day, index) => {
                html += `
                    <button onclick="switchTab(${index})" id="tab-${index}" 
                        class="tab-inactive flex-shrink-0 px-4 py-2 rounded-full text-sm transition-all duration-200 flex flex-col items-center justify-center min-w-[70px]">
                        <span class="font-bold text-xs">${day.date}</span>
                        <span class="text-[10px]">${day.day}</span>
                    </button>
                `;
            });
            tabsContainer.innerHTML = html;
        }

        function renderItinerary(dayIndex) {
            const container = document.getElementById('itinerary-container');
            const data = itineraryData[dayIndex];
            
            let itemsHtml = '';
            data.items.forEach((item, idx) => {
                // Adjust icon color or class based on type if needed
                let iconColorClass = 'text-morandi';
                let cardClass = '';
                
                if (item.type === 'flight') iconColorClass = 'text-blue-400';
                if (item.type === 'highlight') iconColorClass = 'text-pink-400';
                if (item.type === 'meal') {
                    iconColorClass = 'text-yellow-500';
                    cardClass = 'card-meal'; // Use yellow border for meals
                }
                if (item.type === 'alert') {
                    iconColorClass = 'text-red-500';
                    cardClass = 'card-alert';
                }

                // Fix for font awesome fireworks icon mapping if needed, or stick to default
                let iconClass = `fa-solid ${item.icon} ${iconColorClass}`;
                
                // Allow overriding border color via data
                let borderClass = item.specialClass ? item.specialClass : (item.type === 'meal' ? 'border-l-yellow-300' : 'border-l-morandi');

                itemsHtml += `
                    <div class="relative pl-6 pb-6 last:pb-0">
                        <!-- Timeline connector -->
                        ${idx !== data.items.length - 1 ? '<div class="timeline-line"></div>' : ''}
                        
                        <!-- Timeline Dot -->
                        <div class="absolute left-0 top-6 w-10 h-1 z-10 flex items-center justify-center">
                             <!-- Dot is handled by card border or we can add a specific dot -->
                        </div>

                        <!-- Card -->
                        <div class="card p-5 ${borderClass} ${cardClass}">
                            <div class="flex items-start">
                                <div class="mr-4 mt-1 bg-cream-dark p-2 rounded-full w-10 h-10 flex items-center justify-center flex-shrink-0">
                                    <i class="${iconClass} text-lg"></i>
                                </div>
                                <div class="flex-grow w-full">
                                    ${item.time ? `<span class="inline-block bg-morandi-light text-morandi-dark text-[10px] px-2 py-0.5 rounded mb-1 font-bold">${item.time}</span>` : ''}
                                    <h3 class="font-bold text-lg text-text-main mb-1">${item.title}</h3>
                                    <div class="text-sm text-text-light leading-relaxed">${item.desc}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });

            const html = `
                <div class="fade-in">
                    <div class="mb-6 ml-2">
                        <h2 class="text-2xl font-bold text-morandi-dark flex items-center gap-2">
                            ${data.title}
                            <i class="fa-solid fa-leaf text-morandi-light text-lg"></i>
                        </h2>
                        <div class="h-1 w-16 bg-morandi mt-2 rounded"></div>
                    </div>
                    <div class="relative">
                       ${itemsHtml}
                    </div>
                </div>
            `;
            
            container.innerHTML = html;
        }

        function switchTab(index) {
            // Update Tab Styles
            itineraryData.forEach((_, idx) => {
                const btn = document.getElementById(`tab-${idx}`);
                if (idx === index) {
                    btn.classList.remove('tab-inactive');
                    btn.classList.add('tab-active');
                    // Optional: scale effect
                    btn.classList.add('scale-105');
                } else {
                    btn.classList.add('tab-inactive');
                    btn.classList.remove('tab-active');
                    btn.classList.remove('scale-105');
                }
            });

            // Update Content
            renderItinerary(index);
            
            // Scroll to top of content container
            document.getElementById('main-content').scrollTop = 0;
            
             // Scroll selected tab into view
            const selectedTab = document.getElementById(`tab-${index}`);
            selectedTab.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', initApp);

    </script>
</body>
</html>